!function(){"use strict";class e{constructor(e,t){var s,r,i;s=this,i=()=>this._inputElements.every((e=>e.validity.valid)),(r=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var r=s.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(r="_checkFormValidity"))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i,this._formSelector=e.inputSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._form=t}_showInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}_toggleButtonState(){this._checkFormValidity()?(this._submitButton.disabled=!1,this._submitButton.classList.remove(this._inactiveButtonClass)):(this._submitButton.disabled=!0,this._submitButton.classList.add(this._inactiveButtonClass))}_hideInputError(e){const t=this._form.querySelector("#"+e.id+"-error");e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}_checkInputValidity(e){if(!e.validity.valid)return this._showInputError(e);this._hideInputError(e)}_setEventListeners(){this._inputElements=[...this._form.querySelectorAll(this._inputSelector)],this._submitButton=this._form.querySelector(this._submitButtonSelector),this._toggleButtonState(),this._inputElements.forEach((e=>{e.addEventListener("input",(t=>{this._checkInputValidity(e),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState()}enableValidation(){this._form.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}class t{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscUp=this._handleEscUp.bind(this)}_handleEscUp(e){"Escape"===e.key&&(document.querySelector(".modal_open"),this.close())}setEventListener(){document.addEventListener("mousedown",(e=>{(e.target.classList.contains("modal_open")||e.target.classList.contains("modal__close-button-image"))&&this.close()}))}open(){this._popupElement.classList.add("modal_open"),document.addEventListener("keydown",this._handleEscUp)}close(){this._popupElement.classList.remove("modal_open"),document.removeEventListener("keydown",this._handleEscUp)}}class s extends t{constructor(e){let{popupSelector:t,handleFormSubmit:s}=e;super({popupSelector:t}),this._handleFormSubmit=s,this._popupForm=this._popupElement.querySelector(".modal__form")}_getInputValues(){const e=this._popupElement.querySelectorAll(".modal__input"),t={};return e.forEach((e=>{t[e.name]=e.value})),t}setEventListener(){super.setEventListener(),this._popupForm.addEventListener("submit",(()=>{this._handleFormSubmit(this._getInputValues())}))}setLoading(e,t){const s=this._popupForm.querySelector(".modal__button");console.log(s),s.textContent=e?"Saving...":t}close(){this._popupForm.reset(),super.close()}}const r=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}getData(){return Promise.all([this.getUserInfo(),this.getInitialCards()])}_sendRequest(e,t){return fetch(e,t).then((e=>e.ok?e.json():Promise.reject(`Error: ${e.status}`)))}getUserInfo(){return this._sendRequest(`${this._baseUrl}/users/me`,{headers:this._headers})}saveUserInfo(e){let{name:t,about:s}=e;return this._sendRequest(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:s})})}getInitialCards(){return this._sendRequest(`${this._baseUrl}/cards`,{headers:this._headers})}saveAddCard(e){let{name:t,link:s}=e;return this._sendRequest(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:s})})}removeCard(e){return this._sendRequest(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}addLike(e){return this._sendRequest(`${this._baseUrl}/cards/likes/${e}`,{method:"PUT",headers:this._headers})}removeLike(e){return this._sendRequest(`${this._baseUrl}/cards/likes/${e}`,{method:"DELETE",headers:this._headers})}updateProfileImage(e){let{link:t}=e;return this._sendRequest(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})})}}({baseUrl:"https://around.nomoreparties.co/v1/group-12",headers:{authorization:"7279c0be-4bdd-49b0-9b2c-1082aa2638f0","Content-Type":"application/json"}});let i=null;r.getData().then((e=>{let[t,s]=e;y.setUserInfo({name:t.name,about:t.about}),y.setUserAvatar({avatar:t.avatar}),i=t._id,q.renderItems(s)})).catch((e=>{console.log(e)}));const n=document.querySelector(".profile__button-edit"),o=document.querySelector("#modal-edit-form"),a=document.querySelector(".profile__button"),l=document.querySelector("#modal-card-form"),d=document.querySelector("#name"),c=document.querySelector("#about"),u=document.querySelector(".profile__image-button"),h=document.querySelector("#modal-avatar-form"),_=document.querySelector(".profile__image"),m={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error-visible"},p=new class extends t{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._title=this._popupElement.querySelector(".modal__image-description"),this._image=this._popupElement.querySelector(".modal__preview-image")}open(e,t){this._title.textContent=e,this._image.src=t,this._image.alt=e,super.open()}}({popupSelector:"#image-modal"}),v=new class extends t{constructor(e){let{popupSelector:t}=e;super({popupSelector:t}),this._popupForm=this._popupElement.querySelector(".modal__form")}setSubmitAction(e){this._handleFormSubmit=e}setEventListener(){super.setEventListener(),this._popupElement.querySelector(".modal__form").addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit()}))}setLoading(e,t){this._popupForm.querySelector(".modal__button").textContent=e?"Deleting...":t}}({popupSelector:"#modal-delete"}),S=e=>{const t=new class{constructor(e,t){let{cardData:s,handleImageClick:r,handleDeleteCard:i,handleLikeButton:n,userId:o}=e;this._name=s.name,this._link=s.link,this._alt=s.name,this._id=s._id,this._ownerId=s.owner._id,this._userId=o,this._likes=s.likes,this._handleImageClick=r,this._handleDeleteCard=i,this._handleLikeButton=n,this._cardSelector=t}getId(){return this._id}_setEventListeners(){this.element.querySelector(".card__title-button").addEventListener("click",(()=>this._handleLikeButton())),this.element.querySelector(".card__delete-button")?.addEventListener("click",(()=>this._handleDeleteCard(this._name,this._link))),this.element.querySelector(".card__image").addEventListener("click",(()=>this._handleImageClick(this._name,this._link)))}removeCard(){this.element.remove()}isLiked(){return this._likes.some((e=>e._id===this._userId))}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card__content").cloneNode(!0)}getView(){return this.element=this._getTemplate(),this.element.querySelector(".card__image").src=this._link,this.element.querySelector(".card__image").alt=this._alt,this.element.querySelector(".card__title").textContent=this._name,this._likeCounter=this.element.querySelector(".card__like-count"),this._renderLikes(),this._ownerId!==this._userId&&this.element.querySelector(".card__delete-button").remove(),this._setEventListeners(),this.element}_renderLikes(){this._likeCounter.textContent=this._likes.length||"",this.isLiked()?this.element.querySelector(".card__like-image").classList.add("card__like-image_active"):this.element.querySelector(".card__like-image").classList.remove("card__like-image_active")}setLikesInfo(e){this._likes=e,this._renderLikes()}}({cardData:e,userId:i,handleImageClick:(e,t)=>{p.open(e,t)},handleDeleteCard:()=>{v.open(),v.setSubmitAction((()=>{v.setLoading(!0),r.removeCard(t.getId()).then((e=>{t.removeCard(),v.close()})).catch((e=>{console.log(e)})).finally((()=>{v.setLoading(!1,"yes")}))}))},handleLikeButton:()=>{t.isLiked()?r.removeLike(t.getId()).then((e=>{t.setLikesInfo(e.likes)})).catch((e=>{console.log(e)})):r.addLike(t.getId()).then((e=>{t.setLikesInfo(e.likes)})).catch((e=>{console.log("Error adding like:",e)}))}},"#card-template");return t.getView()},g=new e(m,l),b=new e(m,o),E=new e(m,h);g.enableValidation(),b.enableValidation(),E.enableValidation();const y=new class{constructor(e){let{nameSelector:t,titleSelector:s,avatar:r}=e;this._nameElement=document.querySelector(t),this._descriptionElement=document.querySelector(s),this._avatar=document.querySelector(r)}getUserInfo(){return{name:this._nameElement.textContent,about:this._descriptionElement.textContent}}setUserInfo(e){let{name:t,about:s}=e;this._nameElement.textContent=t,this._descriptionElement.textContent=s}getUserAvatar(){return{avatar:this._avatar}}setUserAvatar(e){let{avatar:t}=e;this._avatar.src=t}}({nameSelector:".profile__title",titleSelector:".profile__title-description",avatar:".profile__image"}),L=new s({popupSelector:"#modal-add",handleFormSubmit:e=>{L.setLoading(!0),r.saveUserInfo({name:e.name,about:e.about}).then((()=>{y.setUserInfo({name:e.name,about:e.about}),L.close()})).catch((e=>{console.log(e)})).finally((()=>{L.setLoading(!1,"Save")}))}}),f=new s({popupSelector:"#modal-avatar-add",handleFormSubmit:e=>{f.setLoading(!0),r.updateProfileImage(e).then((e=>{y.setUserAvatar(e),f.close()})).catch((e=>{console.log(e)})).finally((()=>{f.setLoading(!1,"Save")}))}}),k=new s({popupSelector:"#modal-card-add",handleFormSubmit:function(e){k.setLoading(!0),r.saveAddCard(e).then((e=>{k.close(),q.addItem(S(e))})).catch((e=>{console.log(e)})).finally((()=>{k.setLoading(!1,"Create")}))}}),q=new class{constructor(e,t){let{renderer:s}=e;this._renderer=s,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(e){e.reverse().forEach((e=>{this._renderer(e)}))}}({renderer:e=>{const t=S(e);q.addItem(t)}},".card");L.setEventListener(),p.setEventListener(),k.setEventListener(),v.setEventListener(),f.setEventListener();const C=()=>{E.resetValidation(),f.open()};n.addEventListener("click",(()=>{const{name:e,about:t}=y.getUserInfo();d.value=e,c.value=t,b.resetValidation(),L.open()})),a.addEventListener("click",(()=>{g.resetValidation(),k.open()})),u.addEventListener("click",C),_.addEventListener("click",C)}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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S0FDdEIsTUFBUW5JLEtBQU1BLEVBQU0rQixNQUFPQSxHQUFVa0IsRUFBUy9CLGNBQzlDMkMsRUFBWTVELE1BQVFELEVBQ3BCOEQsRUFBbUI3RCxNQUFROEIsRUFDM0I4RSxFQUFxQnZJLGtCQUNyQitJLEVBQWMvSCxNQUFNLElBZ0J0QnFFLEVBQWN2RixpQkFBaUIsU0FiWGdLLEtBQ2xCeEIsRUFBaUJ0SSxrQkFDakJrSixFQUFhbEksTUFBTSxJQWFyQnlFLEVBQWdCM0YsaUJBQWlCLFFBQVM4SixHQUUxQ2pFLEVBQWE3RixpQkFBaUIsUUFBUzhKLEUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvcG9wdXAuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvYXBpLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudHMpIHtcclxuICAgIGNvbnN0IGVycm9yTWVzc2FnZUVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiI1wiICsgaW5wdXRFbGVtZW50cy5pZCArIFwiLWVycm9yXCJcclxuICAgICk7XHJcbiAgICBpbnB1dEVsZW1lbnRzLmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICAgIGVycm9yTWVzc2FnZUVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnRzLnZhbGlkYXRpb25NZXNzYWdlO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2Vycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrRm9ybVZhbGlkaXR5ID0gKCkgPT5cclxuICAgIHRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoKGlucHV0KSA9PiBpbnB1dC52YWxpZGl0eS52YWxpZCk7XHJcblxyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcclxuICAgIGNvbnN0IGlzRm9ybVZhbGlkID0gdGhpcy5fY2hlY2tGb3JtVmFsaWRpdHkoKTtcclxuXHJcbiAgICBpZiAoaXNGb3JtVmFsaWQpIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgdGhpcy5fc3VibWl0QnV0dG9uLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50cykge1xyXG4gICAgY29uc3QgZXJyb3JNZXNzYWdlRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIjXCIgKyBpbnB1dEVsZW1lbnRzLmlkICsgXCItZXJyb3JcIlxyXG4gICAgKTtcclxuICAgIGlucHV0RWxlbWVudHMuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gICAgZXJyb3JNZXNzYWdlRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBlcnJvck1lc3NhZ2VFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKCFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cyA9IFsuLi50aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcildO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcclxuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW5wdXRFbGVtZW50cy5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICAgIGlucHV0RWwuYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsIChlKSA9PiB7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZXNldFZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICB9KTtcclxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUVzY1VwID0gdGhpcy5faGFuZGxlRXNjVXAuYmluZCh0aGlzKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVFc2NVcChldnQpIHtcclxuICAgIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICAgIGNvbnN0IG9wZW5lZE1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9vcGVuXCIpO1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVyKCkge1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX29wZW5cIikgfHxcclxuICAgICAgICBldnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIm1vZGFsX19jbG9zZS1idXR0b24taW1hZ2VcIilcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIG9wZW4oKSB7XHJcbiAgICAvLyAyLiByZXNldCB2YWxpZGF0aW9uXHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5cIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NVcCk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlblwiKTtcclxuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJrZXlkb3duXCIsIHRoaXMuX2hhbmRsZUVzY1VwKTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL3BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciwgaGFuZGxlRm9ybVN1Ym1pdCB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0ID0gaGFuZGxlRm9ybVN1Ym1pdDtcclxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG4gIH1cclxuXHJcbiAgX2dldElucHV0VmFsdWVzKCkge1xyXG4gICAgY29uc3QgaW5wdXRzID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2lucHV0XCIpO1xyXG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcclxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICBpbnB1dFZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcmV0dXJuIGlucHV0VmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXIoKTtcclxuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcsIGJ1dHRvblRleHQpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7XHJcbiAgICBjb25zb2xlLmxvZyhidXR0b24pO1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgYnV0dG9uLnRleHRDb250ZW50ID0gYnV0dG9uVGV4dDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtLnJlc2V0KCk7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgXCIuLi9wYWdlcy9pbmRleC5jc3NcIjtcclxuaW1wb3J0IENhcmQgZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm1cIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mb1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uXCI7XHJcbmltcG9ydCBBcGkgZnJvbSBcIi4uL2NvbXBvbmVudHMvYXBpXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtYXRpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybWF0aW9uXCI7XHJcblxyXG4vLy8vL2FwaSBhdXRoZXJpemF0aW9uLy8vLy8vXHJcbmV4cG9ydCBjb25zdCBhcGkgPSBuZXcgQXBpKHtcclxuICBiYXNlVXJsOiBcImh0dHBzOi8vYXJvdW5kLm5vbW9yZXBhcnRpZXMuY28vdjEvZ3JvdXAtMTJcIixcclxuICBoZWFkZXJzOiB7XHJcbiAgICBhdXRob3JpemF0aW9uOiBcIjcyNzljMGJlLTRiZGQtNDliMC05YjJjLTEwODJhYTI2MzhmMFwiLFxyXG4gICAgXCJDb250ZW50LVR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXHJcbiAgfSxcclxufSk7XHJcblxyXG5sZXQgdXNlcklkID0gbnVsbDtcclxuXHJcbmFwaVxyXG4gIC5nZXREYXRhKClcclxuICAudGhlbigoW3VzZXJEYXRhLCBjYXJkc10pID0+IHtcclxuICAgIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcclxuICAgICAgYWJvdXQ6IHVzZXJEYXRhLmFib3V0LFxyXG4gICAgfSk7XHJcbiAgICB1c2VySW5mby5zZXRVc2VyQXZhdGFyKHtcclxuICAgICAgYXZhdGFyOiB1c2VyRGF0YS5hdmF0YXIsXHJcbiAgICB9KTtcclxuICAgIHVzZXJJZCA9IHVzZXJEYXRhLl9pZDtcclxuICAgIHNlY3Rpb24ucmVuZGVySXRlbXMoY2FyZHMpO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgY29uc29sZS5sb2coZXJyb3IpO1xyXG4gIH0pO1xyXG5cclxuLy8vLy8vLy8vLy9xdWVyeXNlbGVjdG9ycy8vLy8vLy9cclxuY29uc3QgcHJvZmlsZUVkaXRPcGVuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19idXR0b24tZWRpdFwiKTtcclxuY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1lZGl0LWZvcm1cIik7XHJcbmNvbnN0IGNhcmRBZGRCdXR0b24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2J1dHRvblwiKTtcclxuY29uc3QgY2FyZEFkZEZvcm0gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWNhcmQtZm9ybVwiKTtcclxuY29uc3QgcHJvZmlsZU5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XHJcbmNvbnN0IHByb2ZpbGVEZXNjcmlwdGlvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWJvdXRcIik7XHJcbmNvbnN0IGF2YXRhclBvcHVwT3BlbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9faW1hZ2UtYnV0dG9uXCIpO1xyXG5jb25zdCBhdmF0YXJFZGl0UG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWF2YXRhci1mb3JtXCIpO1xyXG5jb25zdCBwcm9maWxlSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2ltYWdlXCIpO1xyXG5cclxuLy8vLy8gZGF0YSBvamVjdHMvLy8vLy8vXHJcbmNvbnN0IHNldHRpbmdzID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4gIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4gIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yLXZpc2libGVcIixcclxufTtcclxuXHJcbmNvbnN0IHBvcHVwQ29uZmlnID0ge1xyXG4gIGVkaXRGb3JtUG9wdXBTZWxlY3RvcjogXCIjbW9kYWwtYWRkXCIsXHJcbiAgYWRkQ2FyZFBvcHVwU2VsZWN0b3I6IFwiI21vZGFsLWNhcmQtYWRkXCIsXHJcbiAgZGVsZXRlQ2FyZFBvcHVwU2VsZWN0b3I6IFwiI21vZGFsLWRlbGV0ZVwiLFxyXG4gIGF2YXRhclBvcHVwU2VsZWN0b3I6IFwiI21vZGFsLWF2YXRhci1hZGRcIixcclxufTtcclxuXHJcbi8vLy8vLy8vLy9pbWFnZSBwcmV2aWV3Ly8vLy8vL1xyXG5jb25zdCBjYXJkUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZSh7IHBvcHVwU2VsZWN0b3I6IFwiI2ltYWdlLW1vZGFsXCIgfSk7XHJcblxyXG4vLy8vLy8vLy8vZGVsZXRlIGNhcmQgbW9kYWwvLy8vXHJcbmNvbnN0IGNhcmRSZW1vdmUgPSBuZXcgUG9wdXBXaXRoQ29uZmlybWF0aW9uKHtcclxuICBwb3B1cFNlbGVjdG9yOiBcIiNtb2RhbC1kZWxldGVcIixcclxufSk7XHJcblxyXG4vLy8vLy8vLy9jYXJkIGJ1aWxkLy8vLy8vLy8vXHJcbmNvbnN0IGNyZWF0ZUNhcmQgPSAoY2FyZERhdGEpID0+IHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoXHJcbiAgICB7XHJcbiAgICAgIGNhcmREYXRhLFxyXG4gICAgICB1c2VySWQsXHJcbiAgICAgIGhhbmRsZUltYWdlQ2xpY2s6IChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICAgICAgY2FyZFByZXZpZXcub3BlbihuYW1lLCBsaW5rKTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlRGVsZXRlQ2FyZDogKCkgPT4ge1xyXG4gICAgICAgIGNhcmRSZW1vdmUub3BlbigpO1xyXG4gICAgICAgIGNhcmRSZW1vdmUuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcclxuICAgICAgICAgIGNhcmRSZW1vdmUuc2V0TG9hZGluZyh0cnVlKTtcclxuICAgICAgICAgIGFwaVxyXG4gICAgICAgICAgICAucmVtb3ZlQ2FyZChjYXJkLmdldElkKCkpXHJcbiAgICAgICAgICAgIC50aGVuKChyZXMpID0+IHtcclxuICAgICAgICAgICAgICBjYXJkLnJlbW92ZUNhcmQoKTtcclxuICAgICAgICAgICAgICBjYXJkUmVtb3ZlLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICAgICAgICBjYXJkUmVtb3ZlLnNldExvYWRpbmcoZmFsc2UsIFwieWVzXCIpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgICAgfSxcclxuICAgICAgaGFuZGxlTGlrZUJ1dHRvbjogKCkgPT4ge1xyXG4gICAgICAgIGlmIChjYXJkLmlzTGlrZWQoKSkge1xyXG4gICAgICAgICAgYXBpXHJcbiAgICAgICAgICAgIC5yZW1vdmVMaWtlKGNhcmQuZ2V0SWQoKSlcclxuICAgICAgICAgICAgLnRoZW4oKHJlcykgPT4ge1xyXG4gICAgICAgICAgICAgIGNhcmQuc2V0TGlrZXNJbmZvKHJlcy5saWtlcyk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBhcGlcclxuICAgICAgICAgICAgLmFkZExpa2UoY2FyZC5nZXRJZCgpKVxyXG4gICAgICAgICAgICAudGhlbigocmVzKSA9PiB7XHJcbiAgICAgICAgICAgICAgY2FyZC5zZXRMaWtlc0luZm8ocmVzLmxpa2VzKTtcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICAgIGNvbnNvbGUubG9nKFwiRXJyb3IgYWRkaW5nIGxpa2U6XCIsIGVycm9yKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSxcclxuICAgIFwiI2NhcmQtdGVtcGxhdGVcIlxyXG4gICk7XHJcbiAgcmV0dXJuIGNhcmQuZ2V0VmlldygpO1xyXG59O1xyXG5cclxuLy8vLy8vL2Zvcm0gVmFsaWRhdG9yLy8vLy8vL1xyXG5jb25zdCBhZGRGb3JtVmFsaWRhdG9yID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGNhcmRBZGRGb3JtKTtcclxuY29uc3QgYWRkRWRpdEZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgcHJvZmlsZUVkaXRGb3JtKTtcclxuY29uc3QgYXZhdGFyRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBhdmF0YXJFZGl0UG9wdXApO1xyXG5hZGRGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuYWRkRWRpdEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5hdmF0YXJGb3JtVmFsaWRhdG9yLmVuYWJsZVZhbGlkYXRpb24oKTtcclxuXHJcbi8vLy8vLy9Vc2VyIEluZm8vLy8vLy8vLy8vXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICBuYW1lU2VsZWN0b3I6IFwiLnByb2ZpbGVfX3RpdGxlXCIsXHJcbiAgdGl0bGVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGUtZGVzY3JpcHRpb25cIixcclxuICBhdmF0YXI6IFwiLnByb2ZpbGVfX2ltYWdlXCIsXHJcbn0pO1xyXG5cclxuLy8vLy8vL2VkaXQgcG9wdXAvLy8vLy9cclxuY29uc3QgZWRpdEZvcm1Qb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKHtcclxuICBwb3B1cFNlbGVjdG9yOiBwb3B1cENvbmZpZy5lZGl0Rm9ybVBvcHVwU2VsZWN0b3IsXHJcblxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IChkYXRhKSA9PiB7XHJcbiAgICBlZGl0Rm9ybVBvcHVwLnNldExvYWRpbmcodHJ1ZSk7XHJcbiAgICBhcGlcclxuICAgICAgLnNhdmVVc2VySW5mbyh7XHJcbiAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgIGFib3V0OiBkYXRhLmFib3V0LFxyXG4gICAgICB9KVxyXG4gICAgICAudGhlbigoKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckluZm8oe1xyXG4gICAgICAgICAgbmFtZTogZGF0YS5uYW1lLFxyXG4gICAgICAgICAgYWJvdXQ6IGRhdGEuYWJvdXQsXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZWRpdEZvcm1Qb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBlZGl0Rm9ybVBvcHVwLnNldExvYWRpbmcoZmFsc2UsIFwiU2F2ZVwiKTtcclxuICAgICAgfSk7XHJcbiAgfSxcclxufSk7XHJcbi8vLy8vLy8vYXZhdGFyIHBvcHVwLy8vL1xyXG5cclxuY29uc3QgYXZhdGFyUG9wdXAgPSBuZXcgUG9wdXBXaXRoRm9ybSh7XHJcbiAgcG9wdXBTZWxlY3RvcjogcG9wdXBDb25maWcuYXZhdGFyUG9wdXBTZWxlY3RvcixcclxuICBoYW5kbGVGb3JtU3VibWl0OiAoZGF0YSkgPT4ge1xyXG4gICAgYXZhdGFyUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAudXBkYXRlUHJvZmlsZUltYWdlKGRhdGEpXHJcbiAgICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgICAgdXNlckluZm8uc2V0VXNlckF2YXRhcihkYXRhKTtcclxuICAgICAgICBhdmF0YXJQb3B1cC5jbG9zZSgpO1xyXG4gICAgICB9KVxyXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBhdmF0YXJQb3B1cC5zZXRMb2FkaW5nKGZhbHNlLCBcIlNhdmVcIik7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8vLy8vYWRkIGNhcmQgcG9wdXAvLy8vLy8vLy9cclxuY29uc3QgYWRkQ2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oe1xyXG4gIHBvcHVwU2VsZWN0b3I6IHBvcHVwQ29uZmlnLmFkZENhcmRQb3B1cFNlbGVjdG9yLFxyXG4gIGhhbmRsZUZvcm1TdWJtaXQ6IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICBhZGRDYXJkUG9wdXAuc2V0TG9hZGluZyh0cnVlKTtcclxuICAgIGFwaVxyXG4gICAgICAuc2F2ZUFkZENhcmQoZGF0YSlcclxuICAgICAgLnRoZW4oKGRhdGEpID0+IHtcclxuICAgICAgICBhZGRDYXJkUG9wdXAuY2xvc2UoKTtcclxuICAgICAgICBzZWN0aW9uLmFkZEl0ZW0oY3JlYXRlQ2FyZChkYXRhKSk7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZyhlcnJvcik7XHJcbiAgICAgIH0pXHJcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgICBhZGRDYXJkUG9wdXAuc2V0TG9hZGluZyhmYWxzZSwgXCJDcmVhdGVcIik7XHJcbiAgICAgIH0pO1xyXG4gIH0sXHJcbn0pO1xyXG5cclxuLy8vLy8vL3NlY3Rpb24gY2xhc3MvLy8vLy8vLy9cclxuY29uc3Qgc2VjdGlvbiA9IG5ldyBTZWN0aW9uKFxyXG4gIHtcclxuICAgIHJlbmRlcmVyOiAoZGF0YSkgPT4ge1xyXG4gICAgICBjb25zdCBjYXJkID0gY3JlYXRlQ2FyZChkYXRhKTtcclxuICAgICAgc2VjdGlvbi5hZGRJdGVtKGNhcmQpO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFwiLmNhcmRcIlxyXG4pO1xyXG5cclxuLy8vLy8vL3BvcHVwIGV2ZW50IGxpc3RlbmVycy8vLy8vXHJcbmVkaXRGb3JtUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG5cclxuY2FyZFByZXZpZXcuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG5cclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXIoKTtcclxuXHJcbmNhcmRSZW1vdmUuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG5cclxuYXZhdGFyUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcigpO1xyXG5cclxuLy8vLy8vIG9wZW4gbW9kYWxzIC8vLy8vLy8vLy8vXHJcbmNvbnN0IG9wZW5Qcm9maWxlRWRpdCA9ICgpID0+IHtcclxuICBjb25zdCB7IG5hbWU6IG5hbWUsIGFib3V0OiBhYm91dCB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlTmFtZS52YWx1ZSA9IG5hbWU7XHJcbiAgcHJvZmlsZURlc2NyaXB0aW9uLnZhbHVlID0gYWJvdXQ7XHJcbiAgYWRkRWRpdEZvcm1WYWxpZGF0b3IucmVzZXRWYWxpZGF0aW9uKCk7XHJcbiAgZWRpdEZvcm1Qb3B1cC5vcGVuKCk7XHJcbn07XHJcblxyXG5jb25zdCBvcGVuQ2FyZEFkZCA9ICgpID0+IHtcclxuICBhZGRGb3JtVmFsaWRhdG9yLnJlc2V0VmFsaWRhdGlvbigpO1xyXG4gIGFkZENhcmRQb3B1cC5vcGVuKCk7XHJcbn07XHJcblxyXG5jb25zdCBvcGVuQXZhdGFyUG9wdXAgPSAoKSA9PiB7XHJcbiAgYXZhdGFyRm9ybVZhbGlkYXRvci5yZXNldFZhbGlkYXRpb24oKTtcclxuICBhdmF0YXJQb3B1cC5vcGVuKCk7XHJcbn07XHJcblxyXG4vLy8vLy9hZGQgZXZlbnQgbGlzdGVuZXJzLy8vL1xyXG5wcm9maWxlRWRpdE9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5Qcm9maWxlRWRpdCk7XHJcblxyXG5jYXJkQWRkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCBvcGVuQ2FyZEFkZCk7XHJcblxyXG5hdmF0YXJQb3B1cE9wZW4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BdmF0YXJQb3B1cCk7XHJcblxyXG5wcm9maWxlSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIG9wZW5BdmF0YXJQb3B1cCk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XHJcbiAgY29uc3RydWN0b3Iob3B0aW9ucykge1xyXG4gICAgdGhpcy5fYmFzZVVybCA9IG9wdGlvbnMuYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XHJcbiAgfVxyXG5cclxuICBnZXREYXRhKCkge1xyXG4gICAgcmV0dXJuIFByb21pc2UuYWxsKFt0aGlzLmdldFVzZXJJbmZvKCksIHRoaXMuZ2V0SW5pdGlhbENhcmRzKCldKTtcclxuICB9XHJcblxyXG4gIF9zZW5kUmVxdWVzdChsaW5rLCBkYXRhKSB7XHJcbiAgICByZXR1cm4gZmV0Y2gobGluaywgZGF0YSkudGhlbigocmVzKSA9PiB7XHJcbiAgICAgIGlmIChyZXMub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzLmpzb24oKTtcclxuICAgICAgfVxyXG4gICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YCk7XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzYXZlVXNlckluZm8oeyBuYW1lLCBhYm91dCB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICBhYm91dDogYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHNhdmVBZGRDYXJkKHsgbmFtZSwgbGluayB9KSB7XHJcbiAgICByZXR1cm4gdGhpcy5fc2VuZFJlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQT1NUXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICBuYW1lLFxyXG4gICAgICAgIGxpbmssXHJcbiAgICAgIH0pLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVDYXJkKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBhZGRMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIlBVVFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICByZW1vdmVMaWtlKGNhcmRJZCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlbmRSZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzL2xpa2VzLyR7Y2FyZElkfWAsIHtcclxuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICB1cGRhdGVQcm9maWxlSW1hZ2UoeyBsaW5rIH0pIHtcclxuICAgIHJldHVybiB0aGlzLl9zZW5kUmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZS9hdmF0YXJgLCB7XHJcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxyXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxyXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgYXZhdGFyOiBsaW5rLFxyXG4gICAgICB9KSxcclxuICAgIH0pO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHsgcG9wdXBTZWxlY3RvciB9KSB7XHJcbiAgICBzdXBlcih7IHBvcHVwU2VsZWN0b3IgfSk7XHJcbiAgICB0aGlzLl90aXRsZSA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZS1kZXNjcmlwdGlvblwiKTtcclxuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3ByZXZpZXctaW1hZ2VcIik7XHJcbiAgfVxyXG5cclxuICBvcGVuKG5hbWUsIGxpbmspIHtcclxuICAgIHRoaXMuX3RpdGxlLnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBuYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vcG9wdXBcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm1hdGlvbiBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcih7IHBvcHVwU2VsZWN0b3IgfSkge1xyXG4gICAgc3VwZXIoeyBwb3B1cFNlbGVjdG9yIH0pO1xyXG4gICAgdGhpcy5fcG9wdXBGb3JtID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgfVxyXG4gIHNldFN1Ym1pdEFjdGlvbihjYWxsQmFjaykge1xyXG4gICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCA9IGNhbGxCYWNrO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcigpIHtcclxuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXIoKTtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLl9oYW5kbGVGb3JtU3VibWl0KCk7XHJcbiAgICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgc2V0TG9hZGluZyhpc0xvYWRpbmcsIGJ1dHRvblRleHQpIHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19idXR0b25cIik7O1xyXG4gICAgaWYgKGlzTG9hZGluZykge1xyXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBcIkRlbGV0aW5nLi4uXCI7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBidXR0b24udGV4dENvbnRlbnQgPSBidXR0b25UZXh0O1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCJjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3RvcihcclxuICAgIHsgY2FyZERhdGEsIGhhbmRsZUltYWdlQ2xpY2ssIGhhbmRsZURlbGV0ZUNhcmQsIGhhbmRsZUxpa2VCdXR0b24sIHVzZXJJZCB9LFxyXG4gICAgY2FyZFNlbGVjdG9yXHJcbiAgKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBjYXJkRGF0YS5saW5rO1xyXG4gICAgdGhpcy5fYWx0ID0gY2FyZERhdGEubmFtZTtcclxuICAgIHRoaXMuX2lkID0gY2FyZERhdGEuX2lkO1xyXG4gICAgdGhpcy5fb3duZXJJZCA9IGNhcmREYXRhLm93bmVyLl9pZDtcclxuICAgIHRoaXMuX3VzZXJJZCA9IHVzZXJJZDtcclxuICAgIHRoaXMuX2xpa2VzID0gY2FyZERhdGEubGlrZXM7XHJcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICAgIHRoaXMuX2hhbmRsZURlbGV0ZUNhcmQgPSBoYW5kbGVEZWxldGVDYXJkO1xyXG4gICAgdGhpcy5faGFuZGxlTGlrZUJ1dHRvbiA9IGhhbmRsZUxpa2VCdXR0b247XHJcbiAgICB0aGlzLl9jYXJkU2VsZWN0b3IgPSBjYXJkU2VsZWN0b3I7XHJcbiAgfVxyXG5cclxuICBnZXRJZCgpIHtcclxuICAgIHJldHVybiB0aGlzLl9pZDtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX190aXRsZS1idXR0b25cIilcclxuICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLl9oYW5kbGVMaWtlQnV0dG9uKCkpO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnV0dG9uXCIpXHJcbiAgICAgID8uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQ2FyZCh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgICApO1xyXG5cclxuICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKVxyXG4gICAgICAuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+XHJcbiAgICAgICAgdGhpcy5faGFuZGxlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKVxyXG4gICAgICApO1xyXG4gIH1cclxuXHJcbiAgcmVtb3ZlQ2FyZCgpIHtcclxuICAgIHRoaXMuZWxlbWVudC5yZW1vdmUoKTtcclxuICB9XHJcblxyXG4gIGlzTGlrZWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGlrZXMuc29tZSgobGlrZSkgPT4ge1xyXG4gICAgICByZXR1cm4gbGlrZS5faWQgPT09IHRoaXMuX3VzZXJJZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19jb250ZW50XCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgfVxyXG5cclxuICBnZXRWaWV3KCkge1xyXG4gICAgdGhpcy5lbGVtZW50ID0gdGhpcy5fZ2V0VGVtcGxhdGUoKTtcclxuXHJcbiAgICB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKS5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9faW1hZ2VcIikuYWx0ID0gdGhpcy5fYWx0O1xyXG4gICAgdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIikudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xyXG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWNvdW50XCIpO1xyXG4gICAgdGhpcy5fcmVuZGVyTGlrZXMoKTtcclxuXHJcbiAgICBpZiAodGhpcy5fb3duZXJJZCAhPT0gdGhpcy5fdXNlcklkKSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIikucmVtb3ZlKCk7XHJcbiAgICB9XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9yZW5kZXJMaWtlcygpIHtcclxuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoIHx8IFwiXCI7XHJcblxyXG4gICAgaWYgKHRoaXMuaXNMaWtlZCgpKSB7XHJcbiAgICAgIHRoaXMuZWxlbWVudFxyXG4gICAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtaW1hZ2VcIilcclxuICAgICAgICAuY2xhc3NMaXN0LmFkZChcImNhcmRfX2xpa2UtaW1hZ2VfYWN0aXZlXCIpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5lbGVtZW50XHJcbiAgICAgICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZS1pbWFnZVwiKVxyXG4gICAgICAgIC5jbGFzc0xpc3QucmVtb3ZlKFwiY2FyZF9fbGlrZS1pbWFnZV9hY3RpdmVcIik7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRMaWtlc0luZm8obGlrZXMpIHtcclxuICAgIHRoaXMuX2xpa2VzID0gbGlrZXM7XHJcbiAgICB0aGlzLl9yZW5kZXJMaWtlcygpO1xyXG4gIH1cclxufVxyXG5cclxuZXhwb3J0IGRlZmF1bHQgQ2FyZDtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xyXG4gIGNvbnN0cnVjdG9yKHsgbmFtZVNlbGVjdG9yLCB0aXRsZVNlbGVjdG9yLCBhdmF0YXIgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbkVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHRpdGxlU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXIpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICBuYW1lOiB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgICAgYWJvdXQ6IHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGFib3V0IH0pIHtcclxuICAgIHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50ID0gbmFtZTtcclxuICAgIHRoaXMuX2Rlc2NyaXB0aW9uRWxlbWVudC50ZXh0Q29udGVudCA9IGFib3V0O1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckF2YXRhcigpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgIGF2YXRhcjogdGhpcy5fYXZhdGFyXHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRVc2VyQXZhdGFyKHsgYXZhdGFyIH0pIHtcclxuICAgIHRoaXMuX2F2YXRhci5zcmMgPSBhdmF0YXI7XHJcbiAgfVxyXG4gIFxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xyXG4gIGNvbnN0cnVjdG9yKHsgcmVuZGVyZXIgfSwgZWxlbWVudENvbnRhaW5lcikge1xyXG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoZWxlbWVudENvbnRhaW5lcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoaXRlbXMpIHtcclxuICAgIGl0ZW1zLnJldmVyc2UoKS5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJGb3JtVmFsaWRhdG9yIiwiY29uc3RydWN0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwidGhpcyIsIl9pbnB1dEVsZW1lbnRzIiwiZXZlcnkiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfZm9ybVNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX2Zvcm0iLCJfc2hvd0lucHV0RXJyb3IiLCJpbnB1dEVsZW1lbnRzIiwiZXJyb3JNZXNzYWdlRWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJpZCIsImNsYXNzTGlzdCIsImFkZCIsInRleHRDb250ZW50IiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfY2hlY2tGb3JtVmFsaWRpdHkiLCJfc3VibWl0QnV0dG9uIiwiZGlzYWJsZWQiLCJyZW1vdmUiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiaW5wdXRFbGVtZW50IiwiX3NldEV2ZW50TGlzdGVuZXJzIiwicXVlcnlTZWxlY3RvckFsbCIsImZvckVhY2giLCJpbnB1dEVsIiwiYWRkRXZlbnRMaXN0ZW5lciIsImUiLCJyZXNldFZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwicHJldmVudERlZmF1bHQiLCJQb3B1cCIsIl9yZWYiLCJwb3B1cFNlbGVjdG9yIiwiX3BvcHVwRWxlbWVudCIsImRvY3VtZW50IiwiX2hhbmRsZUVzY1VwIiwiYmluZCIsImV2dCIsImtleSIsImNsb3NlIiwic2V0RXZlbnRMaXN0ZW5lciIsInRhcmdldCIsImNvbnRhaW5zIiwib3BlbiIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfcG9wdXBGb3JtIiwiX2dldElucHV0VmFsdWVzIiwiaW5wdXRzIiwiaW5wdXRWYWx1ZXMiLCJuYW1lIiwidmFsdWUiLCJzZXRMb2FkaW5nIiwiaXNMb2FkaW5nIiwiYnV0dG9uVGV4dCIsImJ1dHRvbiIsImNvbnNvbGUiLCJsb2ciLCJyZXNldCIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJnZXREYXRhIiwiUHJvbWlzZSIsImFsbCIsImdldFVzZXJJbmZvIiwiZ2V0SW5pdGlhbENhcmRzIiwiX3NlbmRSZXF1ZXN0IiwibGluayIsImRhdGEiLCJmZXRjaCIsInRoZW4iLCJyZXMiLCJvayIsImpzb24iLCJyZWplY3QiLCJzdGF0dXMiLCJzYXZlVXNlckluZm8iLCJhYm91dCIsIm1ldGhvZCIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2F2ZUFkZENhcmQiLCJfcmVmMiIsInJlbW92ZUNhcmQiLCJjYXJkSWQiLCJhZGRMaWtlIiwicmVtb3ZlTGlrZSIsInVwZGF0ZVByb2ZpbGVJbWFnZSIsIl9yZWYzIiwiYXZhdGFyIiwiYXV0aG9yaXphdGlvbiIsInVzZXJJZCIsInVzZXJEYXRhIiwiY2FyZHMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsIl9pZCIsInNlY3Rpb24iLCJyZW5kZXJJdGVtcyIsImNhdGNoIiwiZXJyb3IiLCJwcm9maWxlRWRpdE9wZW4iLCJwcm9maWxlRWRpdEZvcm0iLCJjYXJkQWRkQnV0dG9uIiwiY2FyZEFkZEZvcm0iLCJwcm9maWxlTmFtZSIsInByb2ZpbGVEZXNjcmlwdGlvbiIsImF2YXRhclBvcHVwT3BlbiIsImF2YXRhckVkaXRQb3B1cCIsInByb2ZpbGVJbWFnZSIsImZvcm1TZWxlY3RvciIsImNhcmRQcmV2aWV3IiwiX3RpdGxlIiwiX2ltYWdlIiwic3JjIiwiYWx0IiwiY2FyZFJlbW92ZSIsInNldFN1Ym1pdEFjdGlvbiIsImNhbGxCYWNrIiwiY3JlYXRlQ2FyZCIsImNhcmREYXRhIiwiY2FyZCIsImNhcmRTZWxlY3RvciIsImhhbmRsZUltYWdlQ2xpY2siLCJoYW5kbGVEZWxldGVDYXJkIiwiaGFuZGxlTGlrZUJ1dHRvbiIsIl9uYW1lIiwiX2xpbmsiLCJfYWx0IiwiX293bmVySWQiLCJvd25lciIsIl91c2VySWQiLCJfbGlrZXMiLCJsaWtlcyIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZURlbGV0ZUNhcmQiLCJfaGFuZGxlTGlrZUJ1dHRvbiIsIl9jYXJkU2VsZWN0b3IiLCJnZXRJZCIsImVsZW1lbnQiLCJpc0xpa2VkIiwic29tZSIsImxpa2UiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2V0VmlldyIsIl9saWtlQ291bnRlciIsIl9yZW5kZXJMaWtlcyIsImxlbmd0aCIsInNldExpa2VzSW5mbyIsImZpbmFsbHkiLCJhZGRGb3JtVmFsaWRhdG9yIiwiYWRkRWRpdEZvcm1WYWxpZGF0b3IiLCJhdmF0YXJGb3JtVmFsaWRhdG9yIiwibmFtZVNlbGVjdG9yIiwidGl0bGVTZWxlY3RvciIsIl9uYW1lRWxlbWVudCIsIl9kZXNjcmlwdGlvbkVsZW1lbnQiLCJfYXZhdGFyIiwiZ2V0VXNlckF2YXRhciIsImVkaXRGb3JtUG9wdXAiLCJlcnIiLCJhdmF0YXJQb3B1cCIsImFkZENhcmRQb3B1cCIsImFkZEl0ZW0iLCJlbGVtZW50Q29udGFpbmVyIiwicmVuZGVyZXIiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwiaXRlbSIsInByZXBlbmQiLCJpdGVtcyIsInJldmVyc2UiLCJvcGVuQXZhdGFyUG9wdXAiLCJvcGVuUHJvZmlsZUVkaXQiLCJvcGVuQ2FyZEFkZCJdLCJzb3VyY2VSb290IjoiIn0=